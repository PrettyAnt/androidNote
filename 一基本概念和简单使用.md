# 参考 #

简书:	[https://www.jianshu.com/p/464fa025229e](https://www.jianshu.com/p/464fa025229e)

github:	[https://github.com/ssseasonnn/RxJava2Demo](https://github.com/ssseasonnn/RxJava2Demo)

# 练习 #

#### 发送与接收 ####

    //链式调用
        Observable.create(new ObservableOnSubscribe<Integer>() {
            @Override
            public void subscribe(ObservableEmitter<Integer> e) throws Exception {
                e.onNext(1);
                e.onNext(2);
                e.onNext(3);
                e.onComplete();
            }
        }).subscribe(new Observer<Integer>() {
            @Override
            public void onSubscribe(Disposable d) {
                Log.d(TAG, "onSubscribe");
            }

            @Override
            public void onNext(Integer value) {
                Log.d(TAG, "onNext=" + value);
            }

            @Override
            public void onError(Throwable e) {
                Log.d(TAG, "onError");
            }

            @Override
            public void onComplete() {
                Log.d(TAG, "onComplete");
            }
        });

日志打印:

![](imgs/rxjavacourse/1-1.png)

tips:
1. 只有当上游和下游建立连接之后, 上游才会开始发送事件. 也就是调用了subscribe() 方法之后才开始发送事件.</br>
2. ObservableEmitter： Emitter是发射器的意思，这个就是用来发出事件的，它可以发出三种类型的事件，通过调用emitter的onNext(T value)、onComplete()和onError(Throwable error)就可以分别发出next事件、complete事件和error事件。</br> 

#### Disposable ####

    //Disposable的使用
        Observable.create(new ObservableOnSubscribe<Integer>() {
            @Override
            public void subscribe(ObservableEmitter<Integer> e) throws Exception {
                Log.d(TAG,"emit="+1);
                e.onNext(1);
                Log.d(TAG,"emit="+2);
                e.onNext(2);
                Log.d(TAG,"emit="+3);
                e.onNext(3);
                e.onComplete();
            }
        }).subscribe(new Observer<Integer>() {
            @Override
            public void onSubscribe(Disposable d) {
                mDisposable = d;
                Log.d(TAG, "onSubscribe");
            }

            @Override
            public void onNext(Integer value) {
                Log.d(TAG, "onNext=" + value);
                if (value == 2) {
                    mDisposable.dispose();
                    Log.d(TAG,"dispose");
                }
            }

            @Override
            public void onError(Throwable e) {
                Log.d(TAG, "onError");
            }

            @Override
            public void onComplete() {
                Log.d(TAG, "onComplete");
            }
        });

日志打印:

![](imgs/rxjavacourse/1-2.png)

tips:Disposable:当调用它的dispose()方法时, 它就会将两根管道切断, 从而导致下游收不到事件.调用dispose()并不会导致上游不再继续发送事件, 上游会继续发送剩余的事件.</br>

#### onComplete ####

    Observable.create(new ObservableOnSubscribe<Integer>() {
            @Override
            public void subscribe(ObservableEmitter<Integer> e) throws Exception {
                e.onNext(1);
                e.onNext(2);
                e.onNext(3);
                e.onComplete();
                e.onNext(4);
            }
        }).subscribe(new Consumer<Integer>() {
            @Override
            public void accept(Integer integer) throws Exception {
                Log.d(TAG, "onNext=" + integer);
            }
        });

日志打印:

![](imgs/rxjavacourse/1-3.png)

tips:

当上游发送了一个onComplete后, 上游onComplete之后的事件将会继续发送, 而下游收到onComplete事件之后将不再继续接收事件.